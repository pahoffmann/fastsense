<launch>
  #### Use this file with Lego-LOAM dataset
  <arg name="bag" />
  <arg name="args" default=""/>

  #### Automatically set sim time true
  <!--<param name="/use_sim_time" value="true"/>-->

  <include file="$(find bridge)/launch/bridge.launch">
    <arg name="board_addr" value="192.168.1.123"/>
    <arg name="timeout" value="10"/>
    <arg name="discard_timestamp" value="true"/>
  </include>

  <node pkg="bridge" type="to_trenz" name="to_trenz" output="screen">
    <remap from="/velodyne_points" to="/from_trenz/velodyne/points" />
    <remap from="/imu/data_raw" to="/interpolation_imu" />
  </node>

  <node pkg="evaluation" type="live_imu_interpolation_node" name="live_imu_interpolation_node" output="screen">
    <remap from="/imu/data" to="/faster_imu" />
    <remap from="/from_trenz/imu/raw" to="/interpolation_imu" />
  </node>

  <node pkg="rosbag" type="play" name="fastsense_player_imu" output="screen" args="$(arg bag) -r 4 --topics /imu/data">
    <!-- <remap from="/velodyne_points" to="/from_trenz/velodyne/points"/> -->
    <remap from="/imu/data" to="/faster_imu"/>
  </node> 

  <node pkg="rosbag" type="play" name="fastsense_player_cloud" output="screen" args="$(arg bag) $(arg args) --clock --topics /velodyne_points /imu/data">
    <remap from="/velodyne_points" to="/from_trenz/velodyne/points"/>
    <!-- <remap from="/imu/data" to="/from_trenz/imu/raw"/> $(arg args)  -->
  </node> 

</launch>
